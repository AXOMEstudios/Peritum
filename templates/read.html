{% extends "base.html" %}
{% block title %}{{d["title"]}} - Peritum{% endblock %}
{% block article_title %}{{d["title"]}}{% endblock %}
{% block article_description %}{{d["description"]}}{% endblock %}

{% block content %}
{% include "components/navbar.html" %}

<main style="display: none;">
  {{article}}
</main>

<section class="section columns my-3">
  <div class="column is-two-thirds">
      <p class="title">
        {{d["title"]}}
      </p>
      <p class="subtitle">
        {{d["description"]}}
      </p>

<div class="card">
<div class="card-image">
<figure class="image is-16by9">
<img src="{{d['image']}}">
</figure>
</div></div><br><br>
    
<div id="editor" class="content"></div>
     
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script>
var quill = new Quill('#editor', {
  theme: 'snow',
  "modules": {
      "toolbar": false
  },
  readOnly: true
});
try {
  function decodeHTMLentities(text) {
    var doc = new DOMParser().parseFromString(text, "text/html");
    return doc.documentElement.textContent;
  }
quill.setContents(JSON.parse(decodeHTMLentities("{{article}}")));
} catch(e) {}
</script>

  </div>
  <div class="column">
<article class="message is-info" id="msg-help">
  <div class="message-header">
    <p>Article details</p>
  </div>
  <div class="message-body content">
    Published on {{d["date"]}}<br>
    ~ {{rt}} minutes reading time<br><br>
    <div class="columns is-vcentered is-mobile" onclick="document.location.href = '/profile/{{author['name']}}'">
      <div class="column">
        <figure class="image">
          <img src="{{author['pic']}}" class="is-rounded is-small-pic">
        </figure>
      </div><div class="column content">
        <h4>{{author["name"]}}</h4>
        <h6 class="has-text-grey">{{article_number}} articles</h6>
      </div>
    </div>
  </div>
</article>
<article class="message is-success" id="msg-warning">
  <div class="message-header">
    <p>Share this article</p>
  </div>
  <div class="message-body">
    <span class="icon">
      <i class="fas fa-envelope"></i>
    </span>
  </div>
</article>
    {% if username == "" %}
<article class="message is-link">
  <div class="message-header">
    <p>Sign in to Peritum</p>
  </div>
  <div class="message-body">
    Join Peritum for an even better experience and the ability to interact with the community - completely free!
    <br><a class="button is-link is-rounded is-fullwidth" href="https://auth.axome.de/signin?url=https%3A%2F%2Fperitum.axome.repl.co%2Fsignin">Get started</a>
  </div>
</article>
    {% endif %}
  </div>
</section>

{% endblock %}